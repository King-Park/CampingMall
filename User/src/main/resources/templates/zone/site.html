<style>
   .star-rating {
      direction: rtl;
      display: inline-block;
   }

   .star-rating input[type=radio] {
      display: none;
   }

   .star-rating label {
      display: inline-block;
      position: relative;
      width: 1.1em;
      font-size: 2em;
      color: #000;
   }

   .star-rating label:hover,
   .star-rating label:hover~label {
      color: #ffd700;
   }

   .star-rating input[type=radio]:checked~label {
      color: #ffd700;
   }
</style>

<script>
   var rating = 0;
   function setRatingValue(value) {
      rating = value;
      console.log("Rating value is: " + rating);
   };

   var score = "";
   function star(count){
      if(count==1){
         score+='<label for="star1">✰</label>';
      }else if(count==2){
         score+='<label for="star2">✰✰</label>';
      }else if(count==3){
         score+='<label for="star3">✰✰✰</label>';
      }else if(count==4){
         score+='<label for="star4">✰✰✰✰</label>';
      }else if(count==5){
         score+='<label for="star5">✰✰✰✰✰</label>';
      }
   };

   //리뷰 리스트 조회
   function showReview() {
      var args = "";
      $.ajax({
         url:'/siteReview',
         data: {'site_code' : '[[${site.site_code}]]'},
         success: function(data){
            for(var i in data){
               score = "";
               star(data[i].review_score+0);
               args += "<ul>";
               args += "<li>별점 :"+score+" </li>";
               args += "<li>"+data[i].review_content+"</li>"
               args += "</ul>";
            }
            document.getElementById('viewList').innerHTML = args;
         }
      });
   };

   $(document).ready(function () {
      $(".nav-item:nth-child(3)").attr('class', 'nav-item active');
      $(".notactive:nth-child(3)").attr('class', 'active');

      showReview();

      //리뷰 등록
      $('#review_score > a').click(function(){
         if('true'=='[[${session.user==null}]]'){
            alert("로그인 후 리뷰 등록이 가능합니다.");
            return;
         }else {
            let review_content = $('#review_score > input[name=review_content]').val();
            console.log(review_content);
            $.ajax({
               url: '/reviewUpload',
               data: {'review_content': review_content, 
                        'review_score': rating,
                        'site_code': '[[${site.site_code}]]'
                     },
               success: function (result) {
                  if(result==1){
                     alert("예약완료 후 작성 할 수 있습니다.")
                  }
                  showReview();
               }

            });
         }
      });
   });

</script>
<div class="back_re">
   <div class="container">
      <div class="row">
         <div class="col-md-12">
            <div class="title">
               <h2>구역안내</h2>
            </div>
         </div>
      </div>
   </div>
</div>
<!-- our_room -->
<div class="our_room">
   <div class="container">
      <div class="row">
         <div class="col-md-12">
            <div class="titlepage">
               <p class="margin_0">캠핑장 구역-사이트를 확인하세요</p>
            </div>
         </div>
      </div>

      <div class="zone">
         <div class="row">
            <div class="col-md-6 col-sm-6">
               <div id="serv_hover" class="room">
                  <div class="room_img">
                     <figure><img th:src="@{/images/} + ${site.image_file}" alt="#" /></figure>
                  </div>
               </div>
            </div>
            <div class="col-md-6 col-sm-6">
               <div id="serv_hover" class="room">
                  <div class="bed_room">
                     <h3 th:text="${site.site_name}"></h3>
                     <p th:text="${site.site_content}"></p>
                  </div>
               </div>
            </div>
         </div>
      </div>

      <div class="zone">
         <div class="row">
            <div class="col-md-12 col-sm-12">
               <div id="serv_hover" class="room">
                  <div class="bed_room card">
                     <h3>한줄 리뷰</h3>
                     <div id="viewList"></div>
                     <form id="review_score">
                        <div class="star-rating">
                           <input type="radio" id="star5" name="rating" value="5" onclick="setRatingValue(this.value)" /><label for="star5">✰</label>
                           <input type="radio" id="star4" name="rating" value="4" onclick="setRatingValue(this.value)" /><label for="star4">✰</label>
                           <input type="radio" id="star3" name="rating" value="3" onclick="setRatingValue(this.value)" /><label for="star3">✰</label>
                           <input type="radio" id="star2" name="rating" value="2" onclick="setRatingValue(this.value)" /><label for="star2">✰</label>
                           <input type="radio" id="star1" name="rating" value="1" onclick="setRatingValue(this.value)" /><label for="star1">✰</label>
                        </div>
                        <input type="text" name="review_content" style="width: 750px;"/>
                        &nbsp;&nbsp;&nbsp;<a href="#review_upload_button">등록</a>
                     </form>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
</div>

<!-- end our_room -->